<!-- index.html: LOGIN CON TWITCH corregido y funcional -->
<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Login - Twitch Kingdoms</title>
  <link rel="stylesheet" href="styles.css">
    <script src="scripts/main.js">
    // Verifica si ya hay una sesi칩n activa al cargar la p치gina
    window.onload = async () => {
      try {
        const res = await fetch(`${BACKEND_URL}/api/user/status`, { credentials: 'include' });
        const user = await res.json();
        if (user.loggedIn) {
          if (user.reino) {
            window.location.href = 'main.html';
          } else {
            window.location.href = 'choose-reino.html';
          }
        }
      } catch (err) {
        console.error('Error al verificar sesi칩n:', err);
      }
    };
  </script>
</head>
<body class="bg-gray-900 text-white flex flex-col justify-center items-center min-h-screen">
  <h1 class="text-3xl mb-6">Twitch Kingdoms</h1>
  <button id="login-button" class="bg-purple-600 hover:bg-purple-700 text-white font-bold py-2 px-4 rounded">
    Iniciar sesi칩n con Twitch
  </button>

  <script>
    document.getElementById('login-button').addEventListener('click', () => {
      window.location.href = `${BACKEND_URL}/auth/twitch`;
    });
  </script>
</body>
</html>